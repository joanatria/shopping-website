{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Brysimus\\\\Desktop\\\\gadgets\\\\ecommerce-frontend\\\\src\\\\components\\\\Navigation.js\",\n  _s = $RefreshSig$();\n// Navigation.js\nimport axios from '../axios';\nimport React, { useRef, useState } from 'react';\nimport { Navbar, Button, Nav, NavDropdown, Container, Form, FormControl } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { LinkContainer } from 'react-router-bootstrap';\nimport { logout, resetNotifications } from '../features/userSlice';\nimport { updateProducts } from '../features/productSlice'; // Import the updateProducts action\nimport './Navigation.css';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Navigation() {\n  _s();\n  var _user$notifications;\n  const navigate = useNavigate();\n  const user = useSelector(state => state.user);\n  const dispatch = useDispatch();\n  const bellRef = useRef(null);\n  const notificationRef = useRef(null);\n  const [bellPos, setBellPos] = useState({});\n  const [searchQuery, setSearchQuery] = useState(''); // Add searchQuery state\n\n  function handleLogout() {\n    dispatch(logout());\n  }\n  const unreadNotifications = user === null || user === void 0 ? void 0 : (_user$notifications = user.notifications) === null || _user$notifications === void 0 ? void 0 : _user$notifications.reduce((acc, current) => {\n    if (current.status === 'unread') return acc + 1;\n    return acc;\n  }, 0);\n  function handleToggleNotifications() {\n    const position = bellRef.current.getBoundingClientRect();\n    setBellPos(position);\n    notificationRef.current.style.display = notificationRef.current.style.display === 'block' ? 'none' : 'block';\n    dispatch(resetNotifications());\n    if (unreadNotifications > 0) axios.post(`/users/${user._id}/updateNotifications`);\n  }\n  function handleSearch(e) {\n    e.preventDefault();\n    axios.get(`http://localhost:8080/products/search/${searchQuery}`).then(_ref => {\n      let {\n        data\n      } = _ref;\n      dispatch(updateProducts(data));\n      navigate(`/search?query=${searchQuery}`); // Navigate to search results page\n    }).catch(error => console.log(error));\n  }\n  function handleInputChange(e) {\n    setSearchQuery(e.target.value);\n  }\n  return /*#__PURE__*/_jsxDEV(Navbar, {\n    bg: \"light\",\n    expand: \"lg\",\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(LinkContainer, {\n        to: \"/\",\n        children: /*#__PURE__*/_jsxDEV(Navbar.Brand, {\n          children: \"Flipzone\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Navbar.Toggle, {\n        \"aria-controls\": \"basic-navbar-nav\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Navbar.Collapse, {\n        id: \"basic-navbar-nav\",\n        children: /*#__PURE__*/_jsxDEV(Nav, {\n          className: \"ms-auto\",\n          children: /*#__PURE__*/_jsxDEV(Form, {\n            className: \"d-flex\",\n            onSubmit: handleSearch,\n            children: [' ', /*#__PURE__*/_jsxDEV(FormControl, {\n              type: \"search\",\n              placeholder: \"Search\",\n              className: \"mr-2\",\n              value: searchQuery,\n              onChange: handleInputChange // Add onChange event handler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline-success\",\n              type: \"submit\",\n              disabled: !searchQuery,\n              children: \"Search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 15\n            }, this), ' ']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n_s(Navigation, \"43i2p3CCjUqYi0TL4CkoAnsh83Q=\", false, function () {\n  return [useNavigate, useSelector, useDispatch];\n});\n_c = Navigation;\nexport default Navigation;\nvar _c;\n$RefreshReg$(_c, \"Navigation\");","map":{"version":3,"names":["axios","React","useRef","useState","Navbar","Button","Nav","NavDropdown","Container","Form","FormControl","useDispatch","useSelector","LinkContainer","logout","resetNotifications","updateProducts","useNavigate","jsxDEV","_jsxDEV","Navigation","_s","_user$notifications","navigate","user","state","dispatch","bellRef","notificationRef","bellPos","setBellPos","searchQuery","setSearchQuery","handleLogout","unreadNotifications","notifications","reduce","acc","current","status","handleToggleNotifications","position","getBoundingClientRect","style","display","post","_id","handleSearch","e","preventDefault","get","then","_ref","data","catch","error","console","log","handleInputChange","target","value","bg","expand","children","to","Brand","fileName","_jsxFileName","lineNumber","columnNumber","Toggle","Collapse","id","className","onSubmit","type","placeholder","onChange","variant","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Brysimus/Desktop/gadgets/ecommerce-frontend/src/components/Navigation.js"],"sourcesContent":["// Navigation.js\r\nimport axios from '../axios';\r\nimport React, { useRef, useState } from 'react';\r\nimport {\r\n  Navbar,\r\n  Button,\r\n  Nav,\r\n  NavDropdown,\r\n  Container,\r\n  Form,\r\n  FormControl,\r\n} from 'react-bootstrap';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { LinkContainer } from 'react-router-bootstrap';\r\nimport { logout, resetNotifications } from '../features/userSlice';\r\nimport { updateProducts } from '../features/productSlice'; // Import the updateProducts action\r\nimport './Navigation.css';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Navigation() {\r\n  const navigate = useNavigate();\r\n  const user = useSelector((state) => state.user);\r\n  const dispatch = useDispatch();\r\n  const bellRef = useRef(null);\r\n  const notificationRef = useRef(null);\r\n  const [bellPos, setBellPos] = useState({});\r\n  const [searchQuery, setSearchQuery] = useState(''); // Add searchQuery state\r\n\r\n  function handleLogout() {\r\n    dispatch(logout());\r\n  }\r\n\r\n  const unreadNotifications = user?.notifications?.reduce((acc, current) => {\r\n    if (current.status === 'unread') return acc + 1;\r\n    return acc;\r\n  }, 0);\r\n\r\n  function handleToggleNotifications() {\r\n    const position = bellRef.current.getBoundingClientRect();\r\n    setBellPos(position);\r\n    notificationRef.current.style.display =\r\n      notificationRef.current.style.display === 'block' ? 'none' : 'block';\r\n    dispatch(resetNotifications());\r\n    if (unreadNotifications > 0)\r\n      axios.post(`/users/${user._id}/updateNotifications`);\r\n  }\r\n\r\n  function handleSearch(e) {\r\n    e.preventDefault();\r\n    axios\r\n      .get(`http://localhost:8080/products/search/${searchQuery}`)\r\n      .then(({ data }) => {\r\n        dispatch(updateProducts(data));\r\n        navigate(`/search?query=${searchQuery}`); // Navigate to search results page\r\n      })\r\n      .catch((error) => console.log(error));\r\n  }\r\n\r\n  function handleInputChange(e) {\r\n    setSearchQuery(e.target.value);\r\n  }\r\n\r\n  return (\r\n    <Navbar bg=\"light\" expand=\"lg\">\r\n      <Container>\r\n        <LinkContainer to=\"/\">\r\n          <Navbar.Brand>Flipzone</Navbar.Brand>\r\n        </LinkContainer>\r\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n        <Navbar.Collapse id=\"basic-navbar-nav\">\r\n          <Nav className=\"ms-auto\">\r\n            {/* Search Bar */}\r\n            <Form className=\"d-flex\" onSubmit={handleSearch}>\r\n              {' '}\r\n              {/* Add onSubmit event handler */}\r\n              <FormControl\r\n                type=\"search\"\r\n                placeholder=\"Search\"\r\n                className=\"mr-2\"\r\n                value={searchQuery}\r\n                onChange={handleInputChange} // Add onChange event handler\r\n              />\r\n              <Button\r\n                variant=\"outline-success\"\r\n                type=\"submit\"\r\n                disabled={!searchQuery}\r\n              >\r\n                Search\r\n              </Button>{' '}\r\n              {/* Change to type=\"submit\" */}\r\n            </Form>\r\n\r\n            {/* Rest of the code */}\r\n          </Nav>\r\n        </Navbar.Collapse>\r\n      </Container>\r\n    </Navbar>\r\n  );\r\n}\r\n\r\nexport default Navigation;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}